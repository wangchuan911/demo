<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.welisdoon.webserver.service.custom.dao.EvaluateDao">

    <resultMap id="EvaluateVO" type="org.welisdoon.webserver.service.custom.entity.EvaluateVO">
        <result property="id" column="id"></result>
        <result property="orderId" column="order_id"></result>
        <result property="userId" column="user_id"></result>
        <result property="remarks" column="remarks"></result>
    </resultMap>

    <parameterMap id="EvaluateVO" type="org.welisdoon.webserver.service.custom.entity.EvaluateVO">
        <parameter property="id" jdbcType="VARCHAR"></parameter>
        <parameter property="orderId" jdbcType="VARCHAR"></parameter>
        <parameter property="userId" jdbcType="INTEGER"></parameter>
        <parameter property="remarks" jdbcType="VARCHAR"></parameter>
    </parameterMap>

    <select id="get" parameterType="string" resultMap="EvaluateVO">
        select a.* from mysql.car_user a
         where a.car_user_id=#{id,jdbcType=VARCHAR}
    </select>
    <update id="set" parameterMap="EvaluateVO">
        update mysql.car_user
        <set>
            <if test="name!=null and name!=''.toString()">
                car_user_name=#{name,jdbcType=VARCHAR},
            </if>
            <if test="role!=null and role>=0">
                car_user_role=#{role,jdbcType=INTEGER},
            </if>
            <if test="phone!=null and phone!=''.toString()">
                car_user_telephone=#{phone,jdbcType=VARCHAR},
            </if>
        </set>
        <where>
            car_user_id=#{id,jdbcType=VARCHAR}
        </where>

    </update>
    <insert id="add" parameterMap="EvaluateVO">
        INSERT INTO mysql.car_user
            (car_user_id,
             car_user_name,
             car_user_role,
             car_user_telephone)
    VALUES (#{id,jdbcType=VARCHAR},
            #{name,jdbcType=VARCHAR},
            #{role,jdbcType=INTEGER},
            #{phone,jdbcType=VARCHAR})
    </insert>

    <select id="list" parameterMap="EvaluateVO" resultMap="EvaluateVO">
        select a.* from mysql.car_user a
        <where>
            <if test="role!=null and role>=0">
                car_user_role=#{role,jdbcType=INTEGER}
            </if>
            <if test="name!=null and name!=''.toString()">
                car_user_name=#{name,jdbcType=VARCHAR}
            </if>
            <if test="id!=null and id>=0">
                car_user_id=#{id,jdbcType=INTEGER}
            </if>
            <if test="phone!=null and phone!=''.toString()">
                car_user_telephone=#{phone,jdbcType=VARCHAR}
            </if>
        </where>
    </select>

</mapper>
