<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="pers.welisdoon.webserver.service.custom.dao.OrderDao">

    <parameterMap id="OrderVO" type="pers.welisdoon.webserver.service.custom.entity.OrderVO">
        <parameter property="orderId" jdbcType="VARCHAR"></parameter>
        <parameter property="orderCode" jdbcType="VARCHAR"></parameter>
        <parameter property="carLicenseNumber" jdbcType="VARCHAR"></parameter>
        <parameter property="carAddress" jdbcType="VARCHAR"></parameter>
        <parameter property="createDate" jdbcType="TIMESTAMP"></parameter>
        <parameter property="finishDate" jdbcType="TIMESTAMP"></parameter>
        <parameter property="orderState" jdbcType="VARCHAR"></parameter>
        <parameter property="orderControlPerson" jdbcType="INTEGER"></parameter>
        <parameter property="orderAppointPerson" jdbcType="INTEGER"></parameter>
        <parameter property="orderArrangeDate" jdbcType="TIMESTAMP"></parameter>
        <parameter property="custId" jdbcType="INTEGER"></parameter>
        <parameter property="serviceId" jdbcType="VARCHAR"></parameter>
        <parameter property="orderNote" jdbcType="VARCHAR"></parameter>
        <parameter property="posX" jdbcType="DOUBLE"></parameter>
        <parameter property="posY" jdbcType="DOUBLE"></parameter>
    </parameterMap>

    <resultMap id="OrderVO" type="pers.welisdoon.webserver.service.custom.entity.OrderVO">
        <result property="orderId" column="order_id"></result>
        <result property="orderCode" column="order_code"></result>
        <result property="carLicenseNumber" column="car_license_number"></result>
        <result property="carAddress" column="car_address"></result>
        <result property="createDate" column="create_date"></result>
        <result property="finishDate" column="finish_date"></result>
        <result property="orderState" column="order_state"></result>
        <result property="orderControlPerson" column="order_control_person"></result>
        <result property="orderAppointPerson" column="order_appoint_person"></result>
        <result property="orderArrangeDate" column="order_arrange_date"></result>
        <result property="custId" column="cust_id"></result>
        <result property="serviceId" column="service_id"></result>
        <result property="orderNote" column="order_note"></result>
        <result property="posX" column="pos_x"></result>
        <result property="posY" column="pos_y"></result>
    </resultMap>
    <insert id="put" parameterMap="OrderVO" useGeneratedKeys="true" keyProperty="orderId">
        INSERT INTO mysql.car_wash_order
            (order_id,
             order_code,
             car_license_number,
             car_address,
             create_date,
             finish_date,
             order_state,
             order_control_person,
             order_appoint_person,
             order_arrange_date,
             cust_id,
             order_note,
             service_id,
             pos_x,
             pos_y)
VALUES (#{orderId,jdbcType=VARCHAR},
        #{orderCode,jdbcType=VARCHAR},
        #{carLicenseNumber,jdbcType=VARCHAR},
        #{carAddress,jdbcType=VARCHAR},
        #{createDate,jdbcType=TIMESTAMP},
        #{finishDate,jdbcType=TIMESTAMP},
        #{orderState,jdbcType=VARCHAR},
        #{orderControlPerson,jdbcType=INTEGER},
        #{orderAppointPerson,jdbcType=INTEGER},
        #{orderArrangeDate,jdbcType=TIMESTAMP},
        #{custId,jdbcType=INTEGER},
        #{orderNote,jdbcType=VARCHAR},
        #{serviceId,jdbcType=VARCHAR},
        #{posX,jdbcType=DOUBLE},
        #{posY,jdbcType=DOUBLE})
    </insert>
    <sql id="selectThis">
        select * from mysql.car_wash_order a
        where
        <if test="orderId!=null and orderId!=''.toString()">
            order_id= #{orderId,jdbcType=VARCHAR} and
        </if>
        <if test="orderCode!=null and orderCode!=''.toString()">
            order_code= #{orderCode,jdbcType=VARCHAR} and
        </if>
        <if test="carLicenseNumber!=null and carLicenseNumber!=''.toString()">
            car_license_number=#{carLicenseNumber,jdbcType=VARCHAR} and
        </if>
        <if test="carAddress!=null and carAddress!=''.toString()">
            car_address= #{carAddress,jdbcType=VARCHAR} and
        </if>
        <if test="createDate!=null ">
            create_date= #{createDate,jdbcType=TIMESTAMP} and
        </if>
        <if test="finishDate!=null ">
            finish_date= #{finishDate,jdbcType=TIMESTAMP} and
        </if>
        <if test="orderState!=null and orderState!=''.toString()">
            order_state= #{orderState,jdbcType=VARCHAR} and
        </if>
        <if test="orderControlPerson!=null and orderControlPerson!=0">
            order_control_person= #{orderControlPerson,jdbcType=INTEGER} and
        </if>
        <if test="orderAppointPerson!=null and orderAppointPerson!=0">
            order_appoint_person= #{orderAppointPerson,jdbcType=INTEGER} and
        </if>
        <if test="orderArrangeDate!=null and orderArrangeDate!=''.toString()">
            order_arrange_date= #{orderArrangeDate,jdbcType=VARCHAR} and
        </if>
        <if test="custId!=null and custId!=0">
            cust_id= #{custId,jdbcType=INTEGER} and
        </if>
    </sql>
    <select id="list" parameterMap="OrderVO" resultMap="OrderVO">
        <include refid="selectThis"></include>
        1=1
    </select>
    <select id="get" parameterMap="OrderVO" resultMap="OrderVO">
        <include refid="selectThis"></include>
        and rownum=1
    </select>
</mapper>
