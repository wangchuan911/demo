<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hubidaauto.servmarket.module.order.dao.BaseOrderDao">
    <sql id="columns">
        A.CODE,A.PRICE,A.FLOW_ID,A.STATUS_ID,A.CUST_ID,A.CLASS_ID
    </sql>
    <select id="list" parameterType="com.hubidaauto.servmarket.module.order.entity.OrderCondition"
            resultType="com.hubidaauto.servmarket.module.order.entity.OrderVO">
        <include refid="list"></include>
        LIMIT ${page.start},${page.size}
    </select>
    <select id="find" parameterType="com.hubidaauto.servmarket.module.order.entity.OrderCondition"
            resultType="com.hubidaauto.servmarket.module.order.entity.OrderVO">
        <include refid="list"></include>
    </select>
    <sql id="list">
        SELECT A.* FROM BASE_ORDER A
        <where>
            <if test="custId!=null">
                and A.CUST_ID=#{custId}
            </if>
            <if test="statusId!=null">
                and A.STATUS_ID=#{statusId}
            </if>
        </where>
    </sql>
    <select id="get" parameterType="long" resultType="com.hubidaauto.servmarket.module.order.entity.OrderVO">
        <include refid="get"></include>
    </select>
    <sql id="get">
        SELECT A.* FROM BASE_ORDER A WHERE A.ID=#{value}
    </sql>

    <insert id="add" parameterType="com.hubidaauto.servmarket.module.order.entity.OrderVO" useGeneratedKeys="true"
            keyProperty="id">
        INSERT INTO shop1.BASE_ORDER (CODE, PRICE, FLOW_ID, STATUS_ID, CUST_ID, CLASS_ID)
        VALUES (#{code},#{price},#{flowId},#{statusId},#{custId},#{classId})
    </insert>

    <update id="put" parameterType="com.hubidaauto.servmarket.module.order.entity.OrderVO">
        UPDATE BASE_ORDER t SET  t.CODE = #{code}, t.PRICE = #{price},t.FLOW_ID=#{flowId},
         t.FLOW_ID = #{flowId}, t.STATUS_ID =  #{statusId}, t.CUST_ID =  #{custId}, t.CLASS_ID =  #{classId}
        WHERE t.ID = #{id}
    </update>
</mapper>
